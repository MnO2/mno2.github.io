<!doctype html>
<html>
    <head>
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-140890995-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-140890995-1');
  </script>
  <meta charset="utf-8">
  <title>Paul Meng's Blog</title>
  <link rel="canonical" href="https://blog.paulme.ng" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-site-verification" content="AhCspkSlkxfv5A28XyOOTijnA59_q-V8rJzKakb4CFA" />

  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

  <meta property="og:title" content="Paul Meng's Blog" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://blog.paulme.ng" />

  <link href="https://fonts.googleapis.com/css?family=EB+Garamond|Roboto&display=swap" rel="stylesheet"> 
  <link href="https://fonts.googleapis.com/css?family=Noto+Sans+JP|Noto+Sans+TC&display=optional" rel="stylesheet"> 
  <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/pure-min.css" integrity="sha384-oAOxQR6DkCoMliIh8yFnu25d7Eq/PHS21PClpwjOTeU2jRSq11vu66rf90/cZr47" crossorigin="anonymous">
  <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/grids-responsive-min.css">
  <link rel="stylesheet" href="../stylesheets/customize-1622403341.css">
  <style>
    html, button, input, select, textarea,
    .pure-g [class *= "pure-u"] {
      font-family: 'Roboto', 'Noto Sans TC', 'Noto Sans JP', sans-serif;
    }

    .post-title {
      font-family: 'EB Garamond', 'Noto Sans TC', 'Noto Sans JP', serif;
    }
  </style>
</head>

    <body>
        <div class="pure-menu pure-menu-horizontal">
            <ul class="pure-menu-list">
                <li class="pure-menu-item"><a href="../about" class="pure-menu-link">About</a></li>
                <li class="pure-menu-item"><a href="../archive.html" class="pure-menu-link">Archive</a></li>
                <li class="pure-menu-item"><a href="../rss/feed.xml" class="pure-menu-link">Subscribe</a></li>
            </ul>
        </div>
        <main class="content" role="main">
            
                <article class="post">
                    <div class="pure-g">
  <div class="pure-u-md-1-5"></div>
  <div class="pure-u-1 pure-u-md-3-5">
    <h1 class="post-title is-center"><a href="../posts/2017-01-07-japan-audible.html">日語有聲書</a></h1>
    <div class="post-meta"><time datetime="2017-01-07 17:30">2017-01-07 17:30</time> </span>
    <div class="slot-content">
      <article>
        <p>前陣子看到有人分享在 <a href="https://tzangms.com/audiobooks-i-listened-in-2016/">2016 年用 Audible 聽完的有聲書</a>，好奇之下就去 Amazon 註冊了來試用。之前只有對 Audible 這項服務只有些許的印象，直到前陣子在逛 Kindle 的時候有看到提示可以加價購買才留意到。不過英文有聲書對我來講方便歸方便，可以在通勤的時間聽而且可以順便讓眼睛休息，不用盯著手機螢幕看。但對我來講並沒有學習英語這層的意義，畢竟自己英語已經算不錯了。不過立刻聯想到可以用來學其它語言，就直接在 Google 上搜尋オーディオブック看看是否有提供有聲書的服務。結果同樣是 Audible 在日本 Amazon 上也有提供。除此之外，還有另外一個<a href="https://www.febe.jp/">Febe.jp</a> 也同樣提供日文有聲書的購買。就品項來看，兩家提供的品項並不太有交集，可能也是跟出版社的合作沒有重疊，Febe.jp 提供比較像是上班族會看的品項，而在 Audible 上則看起來不是古典經典就是學生比較會喜歡的選項。購買方面，Audible 由於在日本還在促銷期間，現在是付月費吃到飽，而 Febe.jp 則是要單本購買，成本自然高很多。另外 Audible 比較吸引人的是他有銀河英雄傳說，有吸引人的作品加上付費選項，自然是選擇 Audible。</p>
<p>Audible 補足了我日文學習的一部分，另外他也有德文，義大利文，法文等的書籍，但可惜的是似乎是沒有亞洲其他語言的選項，像是韓語，越語，印尼語等等。這是蠻可惜的部分，想找大量學習的音頻也就只能找現有會話書的隨書 CD，或是像 Mass Sentence Training 的提出者 Glossika 的學習資料。Glossika 提供的資源的一個好處就是他有非主流商業語種的學習資源。對於要學非主流語種就是很難找這樣的多媒體資源，而 Glossika 有 Transcription 而又有足夠豐富的語句，連 Spaced Repetition 也幫你分好音頻的資源的確是沒在其他地方看過。但在嘗試過後我認為跟其他隨書 CD 的有一些共同問題。首先，錄音是以單句為單位，而且常常不像有聲書的錄音是雇用專業聲優，聲音的表現比較單調自然會很難讓人持續聽下去。就我多年來自己試驗我認為對於非學生類有大量時間的人，語言學習最重要的是就是要讓人「不要半途而廢」，不論多好的教材，甚至有科學語言學上的證明，在最開始熱血學習的一兩個月後，就中斷的教材是沒有意義的。有聲書的內容通常有主題，甚至你可以挑選你有興趣的主題導致你會有興趣持續下去，而不只是學習「語言」本身來支持你的動力。回顧到初衷，通常也是為了看動漫或是追星等才會有某種衝動去學習語言。這樣的想法特別是聽過多國語言咖啡 Terry 的 TED 的演講過後，我更認為這一點很重要，其實語言學習最重要就是「持續」與「不排斥」。只要有音頻多媒體持續接觸，然後零星的練習，就算是把他當背景音樂也是可以在無形中提升。許多人學語言用學數學的方式學，但多年下來的教訓是其實應該是像學唱歌一樣學習。許多人應該有在不知道不覺中學習背景大量播放的歌的經驗。而同樣的道理也可以在工作中用足夠長的音頻來當背景重複播放，一般語言學習書的會話通常就太短，而有聲書剛好是有足夠長的長度可以當背景音樂不斷地放語速又不會太快，Podcast 的話則通常是訪談語速對初學者會過快，較適合用在後期。</p>

      </article>
    </div>
  </div>
  <div class="pure-u-md-1-5"></div>
</div>

                </article>
            
                <article class="post">
                    <div class="pure-g">
  <div class="pure-u-md-1-5"></div>
  <div class="pure-u-1 pure-u-md-3-5">
    <h1 class="post-title is-center"><a href="../posts/2016-09-12-playing-with-bucklescript.html">Playing with Bucklescript</a></h1>
    <div class="post-meta"><time datetime="2016-09-12 17:30">2016-09-12 17:30</time> </span>
    <div class="slot-content">
      <article>
        <p>As of the time of 2016, most of the people agrees that Javascript is truly a language could be run anywhere. The pending problem to be solved is how to manage large Javascript projects. A few of industrial strength projects like Angularjs made the leap and turned to what Microsoft has proposed: Typescript. It’s quite obvious that it would be type-safe and easier to refactor by introducing a type system. Also, it is an optional typing system and therefore it works non-instrusively to your existing projects. You can gradually introduce Typescript’s type declaration file to get you the type-safe. Microsoft also has invested a lot on Typescript’s toolchain to make it work in Visual Studio Code and IDE. For the case that you need a production-ready and hiring-easy toolchain, Typescript is basically a no-brainer choice. Even so, I am still quite unsatisfied with all of the gotchas in Typescript inherited from Javascript in order to be 100% back-compatible. For the use cases that allows me to pick my language, I am still inclined to go for static-typed languages compiled to Javascript, with good Javascript interoperability.</p>
<p>There are a few options on the table that looks mature enough for use.</p>
<ol type="1">
<li>Ghcjs: Althouh officially it is still not 1.0, it seems to be good to use for some middle-size project. However, the downside is also obvious. It is the monstrous size Javascript with all of the Ghcjs runtime. a few lines of code could generate a few MB of target file. Maybe it is OK for the project where you rarely need to upgrade, then you don’t need to download the target Javascript very often. A famous use case is Plow Technology using Ghcjs for its dashboard, where I think it is a fair use case. The other downside is it is hard for Javascript world to call Haskell world, by the hindrance of the Generics and runtime. The good is that you can code in an extremely expressive static typed language with all of its ecosystem on Hackage.</li>
<li>Purescript: A Haskell-like language with is strict-by-default and almost everything in Haskell98 are included. It’s quite well-developed given that it is purely work from community without the support of companies. Completely new language and with strict semantic means it cannot leverage the ecosystem of Haskell and it has to do everything to be battery included. Since it’s release it has grown to the size that is usable and it’s interoperability with Javascript looks sound. Also the compiled Javascript is readable (though interleaved with the magic word of Monad in between). It worths considering if the project members all know Haskell.</li>
<li>Elm: The posterchild of Prezi and an experimentation on the feasibility of FRP. In the latest version it was overthrown and FRP interface was abandoned and turned to traditional Model-View-Controller. This is a big downer since it more-or-less showing you would be better not to rely on this project since it might introducing breaking changes and you are screwed. Apart from that it looks quite nice, The language is Haskell-like, but not only a language, it also comes with its infrastructure to make the composition of the program easier, Reactjs was inspired a lot from Elm, if you know Reactjs you can find a lot of common in their design.</li>
</ol>
<p>Here comes today’s main character: Bucklescript. I read the 1.0 release news from Chinese quora: Zhihu. The creator of Bucklescript: Bob Zhang post a brief introduction of the language and target. I was intrigued by its compiled result. It looks super readable even more than Purescript, but at the same time support almost all of the OCaml ecosystem libararies to compiled to Javascript. It is derived from js_of_ocaml but heavily inspired by Typescript. It made me really would like to pick-up OCaml and play with it by a few toy example programs.</p>
<p>Due to a recent requirement I really need a Slack bot and I think it might be a good use case to test its interoperability with Javascript. What I use for Slack is Slack’s official nodejs library. Bascially you have to require the library and new an client object and using “on” method to listen on various events. And the events are defined as different attributes of the object.</p>
<p>Here is the toy program</p>
<pre><code>    type rtmclient 
    external create_rtmclient: string -&gt; rtmclient = “RtmClient” [@@bs.module “
    ”, “RtmClient”][@@bs.new] 
    let client = create_rtmclient “ABCDEFG”
    external start_client: rtmclient -&gt; unit = “start” [@@bs.send]

    type rtmevent
    external message: rtmevent = “RtmClient.RTM_EVENTS.MESSAGE” [@@bs.val]
    external channel_created: rtmevent = “RtmClient.RTM_EVENTS.CHANNEL_CREATED” [@@bs.val]
    external on: rtmclient -&gt; rtmevent -&gt; (string -&gt; unit [
    ]) -&gt; unit = “” [@@bs.send]

    let handler: string -&gt; unit [
    ] = fun [
    ] s -&gt; Js.log(s)
    let () = on client channel_created handler 
    let () = on client message handler 
    let () = start_client client</code></pre>
<p>And its compiled javascript</p>
<pre><code>    // Generated by BUCKLESCRIPT VERSION 1.0.1 , PLEASE EDIT WITH CARE
    ‘use strict’;

    var RtmClient = require(“
    ”);

    var client = new RtmClient.RtmClient(“ABCDEFG”);

    function handler(s) {
     console.log(s);
     return /* () */0;
    }

    client.on(RtmClient.RTM_EVENTS.CHANNEL_CREATED, handler);

    client.on(RtmClient.RTM_EVENTS.MESSAGE, handler);

    client.start();

    exports.client = client;
    exports.handler = handler;
    /* client Not a pure module */</code></pre>
<p>To be honest it looks nice for the compiled result, even you claimed that it is hand-written I think most of the people would believe you. Just that the document is still young and it cost me some time to figure out how to map the Javascript attribute into the OCaml world. Also, learning the magic of “<span class="citation" data-cites="bs">@bs</span>” attribute, especially the higher order use case took me some time to figure it out. As long as you mark the function with “<span class="citation" data-cites="bs">@bs</span>” then it is no longer the same type as the normal function, therefore you can not simply pass a lambda function to the Javascript world callback, you must mark it with “<span class="citation" data-cites="bs">@bs</span>”. And I still cannot get the hang of bringing values defined in Javascript world into OCaml’s polymorphic variants, I tried “<span class="citation" data-cites="bs.as">@bs.as</span>” but it didn’t work at all. Not sure if I missed something in the syntax.</p>
<p>Overall, I liked the language, not sure if it is officially supported by Bloomberg or just Bob’s side project derived from work. It also gave me a chance to improve my OCaml skill, which is a pending item in my Todo list. Now it is time to cross it off.</p>

      </article>
    </div>
  </div>
  <div class="pure-u-md-1-5"></div>
</div>

                </article>
            
        </main>

        <div class="pure-g">
          <div class="pure-u-md-1-5"></div>
          <div class="pure-u-md-3-5">
          <nav class="main-nav">
            
            <span class="newer-posts">
              <a href="../24/">&larr; Newer Posts</a>
            </span>
            
            
            <span class="older-posts" style="float:right">
              <a href="../26/">Older Posts &rarr;</a>
            </span>
            
          </nav>
          </div>
          <div class="pure-u-md-1-5"></div>
        </div>

        <div class="pure-g">
          <div class="pure-u-md-1-5"></div>
          <div class="pure-u-1 pure-u-md-3-5">
            <div class="page-number is-center">Page 25 of 59</div>
            <footer class="site-footer">
              <div class="inner is-center">
                <section class="copyright">All contents are copyrighted by Paul Meng, CC BY-NC-SA © 2019</section>
              </div>
            </footer>
          </div>
          <div class="pure-u-md-1-5"></div>
        </div>
    </body>
</html>
